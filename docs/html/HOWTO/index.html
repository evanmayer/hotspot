
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.5.4">
    
    
      
        <title>Howto - hotspot</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.80dcb947.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#4cae4f">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="green" data-md-color-accent="lightgreen">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="hotspot" class="md-header__button md-logo" aria-label="hotspot" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            hotspot
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Howto
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/evanmayer/hotspot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hotspot
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="hotspot" class="md-nav__button md-logo" aria-label="hotspot" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    hotspot
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/evanmayer/hotspot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hotspot
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Howto
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Howto
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-hotspot" class="md-nav__link">
    What is hotspot?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-this-document" class="md-nav__link">
    What is this document?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-control-computer" class="md-nav__link">
    Using the control computer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-the-environment" class="md-nav__link">
    Setting Up the Environment
  </a>
  
    <nav class="md-nav" aria-label="Setting Up the Environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#is-the-environment-set-up" class="md-nav__link">
    Is the environment set up?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anaconda" class="md-nav__link">
    Anaconda
  </a>
  
    <nav class="md-nav" aria-label="Anaconda">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#is-anaconda-set-up" class="md-nav__link">
    Is Anaconda set up?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keeping-things-up-to-date" class="md-nav__link">
    Keeping things up to date
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#software-testing-with-pytest" class="md-nav__link">
    Software Testing with pytest
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#power" class="md-nav__link">
    Power
  </a>
  
    <nav class="md-nav" aria-label="Power">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#motors" class="md-nav__link">
    Motors
  </a>
  
    <nav class="md-nav" aria-label="Motors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#do-the-motor-driver-boards-have-power" class="md-nav__link">
    Do the motor driver boards have power?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hawkeyes" class="md-nav__link">
    Hawkeyes
  </a>
  
    <nav class="md-nav" aria-label="Hawkeyes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#do-the-hawkeyes-have-power" class="md-nav__link">
    Do the Hawkeyes have power?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hawkeye-microcontroller" class="md-nav__link">
    Hawkeye Microcontroller
  </a>
  
    <nav class="md-nav" aria-label="Hawkeye Microcontroller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#does-the-microcontroller-have-power" class="md-nav__link">
    Does the microcontroller have power?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frame" class="md-nav__link">
    Frame
  </a>
  
    <nav class="md-nav" aria-label="Frame">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#is-the-frame-fully-assembled" class="md-nav__link">
    Is the frame fully assembled?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serial-communications" class="md-nav__link">
    Serial Communications
  </a>
  
    <nav class="md-nav" aria-label="Serial Communications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#windows" class="md-nav__link">
    Windows
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ubuntu" class="md-nav__link">
    Ubuntu
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motion-outputs" class="md-nav__link">
    Motion Outputs
  </a>
  
    <nav class="md-nav" aria-label="Motion Outputs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#motors_1" class="md-nav__link">
    Motors
  </a>
  
    <nav class="md-nav" aria-label="Motors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#can-the-computer-talk-to-the-motor-drivers" class="md-nav__link">
    Can the computer talk to the motor drivers?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#can-the-motor-drivers-command-the-motors" class="md-nav__link">
    Can the motor drivers command the motors?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#can-the-encoders-provide-position-feedback" class="md-nav__link">
    Can the encoders provide position feedback?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spools" class="md-nav__link">
    Spools
  </a>
  
    <nav class="md-nav" aria-label="Spools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#can-the-motors-make-the-lines-longer-and-shorter" class="md-nav__link">
    Can the motors make the lines longer and shorter?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#radiation-outputs" class="md-nav__link">
    Radiation Outputs
  </a>
  
    <nav class="md-nav" aria-label="Radiation Outputs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#will-moving-the-cables-move-the-hawkeyes" class="md-nav__link">
    Will moving the cables move the Hawkeyes?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#can-the-computer-command-the-hawkeyes" class="md-nav__link">
    Can the computer command the Hawkeyes?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cable-maintenance" class="md-nav__link">
    Cable Maintenance
  </a>
  
    <nav class="md-nav" aria-label="Cable Maintenance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-if-a-cable-breaks" class="md-nav__link">
    What if a cable breaks?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coordinate-system" class="md-nav__link">
    Coordinate System
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-files" class="md-nav__link">
    Input Files
  </a>
  
    <nav class="md-nav" aria-label="Input Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ok-but-is-there-an-easy-way-to-make-a-new-one" class="md-nav__link">
    Ok, but is there an easy way to make a new one?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geometry" class="md-nav__link">
    Geometry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#profile" class="md-nav__link">
    Profile
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-files" class="md-nav__link">
    Output Files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#physical-installation" class="md-nav__link">
    Physical Installation
  </a>
  
    <nav class="md-nav" aria-label="Physical Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general-tips" class="md-nav__link">
    General tips
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#k1" class="md-nav__link">
    K1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#k2" class="md-nav__link">
    K2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#k3" class="md-nav__link">
    K3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#f1" class="md-nav__link">
    F1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p2" class="md-nav__link">
    P2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operation" class="md-nav__link">
    Operation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#homing" class="md-nav__link">
    Homing
  </a>
  
    <nav class="md-nav" aria-label="Homing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-mapping-checks" class="md-nav__link">
    Pre-mapping checks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapping" class="md-nav__link">
    Mapping
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-html" class="md-nav__link">
    Reference HTML
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          Hotspot
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Hotspot" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Hotspot
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/hotspot/algorithm/" class="md-nav__link">
        Algorithm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/hotspot/constants/" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/hotspot/executive/" class="md-nav__link">
        Executive
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/hotspot/hardware/" class="md-nav__link">
        Hardware
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/hotspot/hw_context/" class="md-nav__link">
        Hw Context
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/hotspot/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/hotspot/telemetry/" class="md-nav__link">
        Telemetry
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-hotspot" class="md-nav__link">
    What is hotspot?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-this-document" class="md-nav__link">
    What is this document?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-control-computer" class="md-nav__link">
    Using the control computer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-the-environment" class="md-nav__link">
    Setting Up the Environment
  </a>
  
    <nav class="md-nav" aria-label="Setting Up the Environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#is-the-environment-set-up" class="md-nav__link">
    Is the environment set up?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anaconda" class="md-nav__link">
    Anaconda
  </a>
  
    <nav class="md-nav" aria-label="Anaconda">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#is-anaconda-set-up" class="md-nav__link">
    Is Anaconda set up?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keeping-things-up-to-date" class="md-nav__link">
    Keeping things up to date
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#software-testing-with-pytest" class="md-nav__link">
    Software Testing with pytest
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#power" class="md-nav__link">
    Power
  </a>
  
    <nav class="md-nav" aria-label="Power">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#motors" class="md-nav__link">
    Motors
  </a>
  
    <nav class="md-nav" aria-label="Motors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#do-the-motor-driver-boards-have-power" class="md-nav__link">
    Do the motor driver boards have power?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hawkeyes" class="md-nav__link">
    Hawkeyes
  </a>
  
    <nav class="md-nav" aria-label="Hawkeyes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#do-the-hawkeyes-have-power" class="md-nav__link">
    Do the Hawkeyes have power?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hawkeye-microcontroller" class="md-nav__link">
    Hawkeye Microcontroller
  </a>
  
    <nav class="md-nav" aria-label="Hawkeye Microcontroller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#does-the-microcontroller-have-power" class="md-nav__link">
    Does the microcontroller have power?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frame" class="md-nav__link">
    Frame
  </a>
  
    <nav class="md-nav" aria-label="Frame">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#is-the-frame-fully-assembled" class="md-nav__link">
    Is the frame fully assembled?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serial-communications" class="md-nav__link">
    Serial Communications
  </a>
  
    <nav class="md-nav" aria-label="Serial Communications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#windows" class="md-nav__link">
    Windows
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ubuntu" class="md-nav__link">
    Ubuntu
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motion-outputs" class="md-nav__link">
    Motion Outputs
  </a>
  
    <nav class="md-nav" aria-label="Motion Outputs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#motors_1" class="md-nav__link">
    Motors
  </a>
  
    <nav class="md-nav" aria-label="Motors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#can-the-computer-talk-to-the-motor-drivers" class="md-nav__link">
    Can the computer talk to the motor drivers?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#can-the-motor-drivers-command-the-motors" class="md-nav__link">
    Can the motor drivers command the motors?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#can-the-encoders-provide-position-feedback" class="md-nav__link">
    Can the encoders provide position feedback?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spools" class="md-nav__link">
    Spools
  </a>
  
    <nav class="md-nav" aria-label="Spools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#can-the-motors-make-the-lines-longer-and-shorter" class="md-nav__link">
    Can the motors make the lines longer and shorter?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#radiation-outputs" class="md-nav__link">
    Radiation Outputs
  </a>
  
    <nav class="md-nav" aria-label="Radiation Outputs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#will-moving-the-cables-move-the-hawkeyes" class="md-nav__link">
    Will moving the cables move the Hawkeyes?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#can-the-computer-command-the-hawkeyes" class="md-nav__link">
    Can the computer command the Hawkeyes?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cable-maintenance" class="md-nav__link">
    Cable Maintenance
  </a>
  
    <nav class="md-nav" aria-label="Cable Maintenance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-if-a-cable-breaks" class="md-nav__link">
    What if a cable breaks?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coordinate-system" class="md-nav__link">
    Coordinate System
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-files" class="md-nav__link">
    Input Files
  </a>
  
    <nav class="md-nav" aria-label="Input Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ok-but-is-there-an-easy-way-to-make-a-new-one" class="md-nav__link">
    Ok, but is there an easy way to make a new one?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geometry" class="md-nav__link">
    Geometry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#profile" class="md-nav__link">
    Profile
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-files" class="md-nav__link">
    Output Files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#physical-installation" class="md-nav__link">
    Physical Installation
  </a>
  
    <nav class="md-nav" aria-label="Physical Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general-tips" class="md-nav__link">
    General tips
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#k1" class="md-nav__link">
    K1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#k2" class="md-nav__link">
    K2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#k3" class="md-nav__link">
    K3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#f1" class="md-nav__link">
    F1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p2" class="md-nav__link">
    P2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operation" class="md-nav__link">
    Operation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#homing" class="md-nav__link">
    Homing
  </a>
  
    <nav class="md-nav" aria-label="Homing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-mapping-checks" class="md-nav__link">
    Pre-mapping checks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapping" class="md-nav__link">
    Mapping
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-html" class="md-nav__link">
    Reference HTML
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/evanmayer/hotspot/edit/main/HOWTO.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="how-to">How To</h1>
<p>This doc contains instructions for various tasks related to setting up and running the <code>hotspot</code> mirror mapper.</p>
<h4 id="what-is-hotspot">What is <code>hotspot</code>?</h4>
<p><img alt="entire system" src="../docs/img/full_system.png" /></p>
<p><code>hotspot</code> is a planar cable-driven parallel robot (CDPR), with four stepper motors that move a central raft of hot IR sources by changing the length of cables attached to it. The cables are fixed to an adjustable frame. The frame can clamp to any rectangular surface, but it was designed to clamp to various relay mirrors that couple radiation from the sky to the TIME spectrometer inside the receiver cabin on the ARO 12 meter telescope on Kitt Peak, allowing an electronically controlled, hot, IR-emitting source to be swept across the mirror to observe the detectors' spatial response.</p>
<h4 id="what-is-this-document">What is this document?</h4>
<p>This document is a comprehensive how-to on setting up, maintaining, and running the mirror mapper. It contains all the information that would be needed to replace and reconfigure major components of the system, however unlikely that may be.</p>
<p>It is organized in order of information flow: from the operator (you!) logging into the control computer, to setting up the software environment, connecting the power and signal cables, assembling the mapper frame, creating input files, mounting it on various mirrors, and operating the mapper. </p>
<h2 id="using-the-control-computer">Using the control computer</h2>
<p>The mapper motors are controlled by running the <code>main.py</code> application on a computer with a <a href="https://www.uotek.com/pro_view-122.html">USB-to-RS485 adapter</a>. The IR sources are controlled via a USB cable connected to a microcontroller. You should check out the <code>hotspot</code> repo if you wish to run the mapper or <a href="#ok-but-is-there-an-easy-way-to-make-a-new-one">generate new input files</a>.</p>
<h2 id="setting-up-the-environment">Setting Up the Environment</h2>
<p>To run <code>hotspot</code>, you must satisfy the dependencies. They are enumerated in <code>environment.yml</code>, a human-readable file that can be ingested by the <code>conda</code> Python package manager.</p>
<h4 id="is-the-environment-set-up">Is the environment set up?</h4>
<p>First, check that the environment setup has not been done before. If </p>
<div class="codehilite"><pre><span></span><code>conda<span class="w"> </span>activate<span class="w"> </span>hotspot
</code></pre></div>

<p>succeeds, skip to <a href="#software-testing-with-pytest">software testing with pytest</a>.</p>
<h3 id="anaconda">Anaconda</h3>
<h4 id="is-anaconda-set-up">Is Anaconda set up?</h4>
<p>If the Python environment/package manager <a href="https://www.anaconda.com/">Anaconda</a> does not exist on the computer you're running this on, I recommend installing Miniconda according to <a href="https://docs.conda.io/en/latest/miniconda.html#installing">the instructions</a>.</p>
<p>Once that is done, we are ready to set up the <code>hotspot</code> environment. <code>conda</code> environments keep a project's dependencies from polluting your computer's environment and make sure they all play nicely together. <code>conda</code> allows specifying the dependencies needed in a file with a <code>.yml</code> extension. This is done for you. Create the <code>hotspot</code> conda env with</p>
<div class="codehilite"><pre><span></span><code>conda<span class="w"> </span>env<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>environment.yml
</code></pre></div>

<p>It should install things like <code>numpy</code> and <code>matplotlib</code>, as well as libraries for the hardware, such as the <code>pyserial</code> library for driving the steppers. There are also packages for documentation.</p>
<blockquote>
<p><strong>NOTE:</strong> packages needed for post-processing of photos to measure mapper performance or for producing predicted beam maps using the code in the <code>verification/</code> folder are not covered by this <code>.yml</code>. Aside from OpenCV they are just standard scientific Python packages, so the requirements should be easy to meet if this code is needed.</p>
</blockquote>
<h3 id="keeping-things-up-to-date">Keeping things up to date</h3>
<p>If you need to install something new later on with <code>conda install</code> or <code>pip</code>, remember to update <code>environment.yml</code> by doing </p>
<div class="codehilite"><pre><span></span><code>conda<span class="w"> </span>env<span class="w"> </span><span class="nb">export</span><span class="w"> </span>--from-history<span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>environment.yml
</code></pre></div>

<p>If your <code>environment.yml</code> has been updated, and you need to update your env with the new <code>environment.yml</code>, do</p>
<div class="codehilite"><pre><span></span><code>conda<span class="w"> </span>env<span class="w"> </span>update<span class="w"> </span>--file<span class="w"> </span>environment.yml<span class="w"> </span>--prune
</code></pre></div>

<h2 id="software-testing-with-pytest">Software Testing with <code>pytest</code></h2>
<p>In order to verify that basic low-level functionality is unbroken, run <code>pytest</code> from the toplevel directory of the repo.</p>
<h2 id="power">Power</h2>
<h3 id="motors">Motors</h3>
<h4 id="do-the-motor-driver-boards-have-power">Do the motor driver boards have power?</h4>
<p>Each motor is controlled by an <a href="https://www.americancontrolelectronics.com/ezhr17en">AllMotion EZStepper EZHR17EN</a>. These are <a href="https://homepage.divms.uiowa.edu/~jones/step/current.html#pwm">chopper driver</a> boards that accept 10-40 V input.</p>
<p><img alt="photo of EZStepper board" src="../docs/img/ezstepper.jpg" /></p>
<p>Configure a constant-voltage DC power supply to provide:</p>
<ul>
<li>24 V</li>
<li>4 A</li>
</ul>
<p>The EZStepper drivers are configured in software to draw 50% of the rated 2 A current = 1 A each, for a total of 4 A. In use, the motors may draw somewhat less current.</p>
<blockquote>
<p><strong>Note:</strong> See the AllMotion/American Control Electronics wiring diagram to identify the Vin and GND inputs.</p>
</blockquote>
<h3 id="hawkeyes">Hawkeyes</h3>
<h4 id="do-the-hawkeyes-have-power">Do the Hawkeyes have power?</h4>
<p>The Hawkeyes are mounted on a PCB and powered by a power supply connected to the screw terminal. Positive and ground terminals are labeled on the PCB silkscreen (white text).</p>
<p><img alt="photo of screw terminal" src="../docs/img/screw_terminal.jpeg" /></p>
<p>Requirements:</p>
<ul>
<li>6.7 V (constant voltage)</li>
<li>â‰¥ 2 A</li>
</ul>
<p>The Hawkeye IR-50 source temperature depends on the voltage applied, and the current draw depends on the voltage (see datasheet in <code>pdf</code> dir). The design target temperature is 750 C, requiring a voltage of 6.7V and a current of ~134mA per source, for a total current draw of ~1.74A when all sources are turned on. In practice, Hawkeye sources have not drawn quite this much current.</p>
<p>There will be some voltage drop at the screw terminal; this is normal. If one source is powered, the voltage drop is negligible, but if all 13 sources are powered, the voltage drop is approximately .22 V. Do not attempt to compensate for this at the power supply! If you turn up the supply voltage to 6.9 V to get 6.7 V under a 13 source load, a load of a single source will see 6.9 V, drastically reducing its lifetime.</p>
<h3 id="hawkeye-microcontroller">Hawkeye Microcontroller</h3>
<p>The Hawkeye sources are turned on and off by an Adafruit Trinket M0 microcontroller. It gets 5V power via a micro USB cable.</p>
<h4 id="does-the-microcontroller-have-power">Does the microcontroller have power?</h4>
<p>The Trinket M0's power LED will illuminate when it is connected to the USB port. The Trinket GND pin should be connected to the Hawkeye power supply's ground terminal.</p>
<p><img alt="photo of mcu on" src="../docs/img/trinketm0.jpeg" /></p>
<h2 id="frame">Frame</h2>
<h4 id="is-the-frame-fully-assembled">Is the frame fully assembled?</h4>
<p>The 3D printed stepper motor mounts are attached to the beam mapper frame by 5/16-18 x 2" or 2.25" bolts with nyloc "jam" nuts.</p>
<p>Two aluminum registration tabs are screwed into the end of each frame piece opposite the black plastic end caps, using a 5/16-18 x 1/4" screw. They are long enough to reach an edge of the mirror regardless of if the mirror's corners have been machined off. </p>
<blockquote>
<p><strong>NOTE:</strong> These tabs register the frame to a third edge of the mirror, so <strong>it is important that they not be bent</strong>.</p>
</blockquote>
<p>Long 5/16-18 steel threaded rods connect the two halves of the frame. On one end of the threaded rods, threads in the aluminum extrusion provide clamping force. On the other end of the threaded rod, a slide-adjust nut with a thumb button allows easily changing the distance between clamping surfaces, and applies clamping force to the outside of the opposite aluminum extrusion. Care should be exercised with this slide-adjust nut, as pressing the button will release any tension on the threaded rod.</p>
<h2 id="serial-communications">Serial Communications</h2>
<p>We will be talking to devices over serial. </p>
<h3 id="windows">Windows</h3>
<p>Windows users may need to open <code>hotspot/constants.py</code> and edit the <code>COM</code> values to match the COM ports assigned to the Hawkeye microcontroller and USB-to-RS485 converter by the OS.</p>
<h3 id="ubuntu">Ubuntu</h3>
<p>On Ubuntu, our user must be a part of a special group to talk to devices over serial. To see the groups your user is a part of, type <code>groups</code> in a command prompt.</p>
<p>Add yourself to the <code>tty</code> and <code>dialout</code> groups, then log out and back in to have the changes take effect:</p>
<p><code>sudo usermod -a -G tty $USER</code></p>
<p><code>sudo usermod -a -G dialout $USER</code></p>
<h2 id="motion-outputs">Motion Outputs</h2>
<h3 id="motors_1">Motors</h3>
<h4 id="can-the-computer-talk-to-the-motor-drivers">Can the computer talk to the motor drivers?</h4>
<p>The EZHR17EN stepper drivers receive commands from a control computer running the <code>hotspot</code> software as bytes over the <a href="https://hackaday.com/2022/04/05/hacker-dictionary-rs-485-will-go-the-distance/#more-528633">RS485</a> physical layer.</p>
<blockquote>
<p><strong>Note:</strong> Refer to the AllMotion/American Control Electronics EZHR17EN wiring diagram to verify that the RS485 communications connection is correct.</p>
</blockquote>
<p>The control computer needs either a 9-pin serial output port, or a USB-to-RS485 adapter to send bytes out over the RS485 bus. The inverting/non-inverting outputs are blue and yellow wires. If you are connecting your adapter to the bus for the first time, you may have to <a href="https://en.wikipedia.org/wiki/RS-485#Signals">guess incorrectly</a> and swap the wires before it will work.</p>
<p><img alt="photo of USB-RS485 adapter" src="../docs/img/usb_adapter.jpg" /></p>
<p>The motor drivers must have power and ground (via the 24 VDC power supply) to receive commands.</p>
<blockquote>
<p><strong>NOTE:</strong> RS-485 Connections ought to have a ground wire, although you don't see one pictured here. This is to ensure the differential signal at each receiver is biased correctly. If you experience communication issues on the RS-485 bus, ensure proper grounding.</p>
</blockquote>
<h4 id="can-the-motor-drivers-command-the-motors">Can the motor drivers command the motors?</h4>
<blockquote>
<p><strong>Note:</strong> Refer to the AllMotion/American Control Electronics EZHR17EN wiring diagram to verify that the motor winding connections are correct.</p>
</blockquote>
<p>The stepper motors themselves have NEMA-17 spec hole patterns, which mate to the 3D printed motor mount brackets which are attached to the beam mapper frame. Each stepper motor should be attached to its motor mount using M3 x 0.5 x 10 mm screws. If attaching motors for the first time, use lubricant, because metal on plastic will be squeaky.</p>
<p><img alt="photo of stepper mounted on motor mount" src="../docs/img/mounted_motor.jpg" /></p>
<p>At this point, it is important to consider the mapping of motor driver board address -&gt; stepper motor -&gt; motor mount -&gt; corner of beam mapper frame -&gt; corner of raft. The <code>Executive.__init__()</code> function in <code>executive.py</code> specifies this mapping, so the motor installation location and stepper instance in <code>__init__()</code> should match, to ensure the correct motor commands are sent to the correct stepper. The stepper driver boards are addressable with a selector switch on top. Match the address selector to the correct corner of the raft in the <code>__init__()</code> function.</p>
<p><img alt="photo of address selector switch" src="../docs/img/address_selector.jpg" /></p>
<h4 id="can-the-encoders-provide-position-feedback">Can the encoders provide position feedback?</h4>
<p>The EZHR17EN boards are capable of reading out <a href="https://cdn.sparkfun.com/datasheets/Robotics/How%20to%20use%20a%20quadrature%20encoder.pdf">quadrature encoders</a> affixed to the stepper shafts. Encoder feedback is critical for accurate positioning of the raft.</p>
<p><img alt="photo of stepper encoder" src="../docs/img/encoder.jpg" /></p>
<blockquote>
<p><strong>Note:</strong> Refer to the AllMotion/American Control Electronics EZHR17EN wiring diagram to verify that the encoder connections are correct.</p>
</blockquote>
<h3 id="spools">Spools</h3>
<h4 id="can-the-motors-make-the-lines-longer-and-shorter">Can the motors make the lines longer and shorter?</h4>
<p>The stepper motors drive winch-like drums directly, to change the length of the cables predictably. They are cylindrical drums with helical threads to accept the cables.</p>
<p><img alt="photo of drum with cable extended, at longer rotational limit" src="../docs/img/spool_empty.jpg" /></p>
<p><img alt="photo of drum with cable extended, at shorter rotational limit" src="../docs/img/spool_full.jpg" /></p>
<p>If they are not already attached, the cable drums should be fixed to the 5 mm stepper motor shaft via one M3 setscrew.</p>
<p>The screws mate to steel threaded inserts that are pressed into the PETG plastic spools.</p>
<p>The fishing line is affixed to the each spool by wrapping it around the setscrew and screwing it in to the threaded recess on the spool circumference.</p>
<p><img alt="photo of cable in screw" src="../docs/img/cable_fixture.jpg" /></p>
<blockquote>
<p><strong>NOTE:</strong> Positive motor rotation is defined by convention to spin the shaft clockwise when viewed from the rear of the motor. Cables should be oriented relative to the spool such that a positive motor rotation produces a positive cable length change (i.e., cable is played out from the spool), and a negative motor rotation winds cable onto the spool.</p>
</blockquote>
<p>Since helical threads change the position along the drum $y$ that the cable exits as a function of motor position, the actual length of cable change for a given rotation depends on the thread pitch. Also, a controlled spooling mechanism is usually required. In this case, the corresponding eyelet is located some distance from the spool to achieve controlled spooling with less complexity.</p>
<p><img alt="Drum rationale" src="../docs/img/spool_rationale.jpg" /></p>
<p>After attaching the cables to the spools, the other end should be threaded through the ~.9mm hole in the motor mount bracket on the opposite E-W side of the frame.</p>
<blockquote>
<p><strong>NOTE:</strong> All cables should be cut long enough to permit the raft to visit each corner of the frame, even when the frame is as far apart as it can be (~25.5").</p>
</blockquote>
<p>Finally, excess cable should be wound onto the drum by hand, under tension, to ensure the cable is seated in the drum's grooves.</p>
<h2 id="radiation-outputs">Radiation Outputs</h2>
<h4 id="will-moving-the-cables-move-the-hawkeyes">Will moving the cables move the Hawkeyes?</h4>
<p>The end effector of this robot is a rectangular raft carrying several Hawkeye Technologies <a href="http://www.hawkeyetechnologies.com/source-selection/pulsable/">IR-50</a> emitters. The robot drives the centroid of the effector to a specified position, and the control algorithm performs a sequence of flashes using a number of the emitters to enhance the detectability of the signal in the IR receiver output data.</p>
<p><img alt="photo of raft" src="../docs/img/hawkeye_board.jpeg" /></p>
<p>Pass the cables that emerge from the corner eyelets to the closest eyelets on the raft. Wrap the ends of the fishing line around the screws in each corner of the raft, and screw them down.</p>
<h4 id="can-the-computer-command-the-hawkeyes">Can the computer command the Hawkeyes?</h4>
<p>The Hawkeye IR sources are arranged in roughly 3 concentric circles. Each circle is a separately controllable group of sources, which can be turned on and off by the control software. The first group is a single center source. The second group is the inner ring of six sources surrounding the center. The third group is the outer ring of six sources. Turning on more sources increases the intensity that the TIME receiver sees; this may be necessary for mapping optics where the beam is less concentrated.</p>
<p>Each group is turned on and off by a MOSFET on the raft. The MOSFET gates are controlled by the outputs of a <a href="https://en.wikipedia.org/wiki/Shift_register">shift register</a> chip. The shift register multiplexes 8 bits (a byte) received at its input to its 8 output pins. Only 3 of the 8 are connected to MOSFETs.</p>
<p>The shift register receives a byte from an Adafruit Trinket M0 microcontroller over <a href="https://en.wikipedia.org/wiki/Serial_Peripheral_Interface">SPI</a> via the black silicone ribbon cable, which should be hooked up to the grey connector on the raft. The connector pinout is on the back of the PCB. The other end of the cable is soldered to the Trinket M0 pins.</p>
<p><img alt="photo of Hawkeye data connector" src="../docs/img/hawkeye_data_connector.jpeg" /></p>
<p>The data connection pinout from the Trinket M0 to the ribbon cable connector is as follows:</p>
<ul>
<li>Trinket M0 GND â†’ GND<ul>
<li>The shift register GND must be the same as the microcontroller ground. This should be grounded to the Hawkeye power ground as well.</li>
</ul>
</li>
<li>Trinket M0 BAT â†’ 5 V<ul>
<li>5 V from the USB connector appears here. This powers the shift register.</li>
</ul>
</li>
<li>Trinket M0 2 â†’ LATCH<ul>
<li>This pin goes low when an SPI transfer is started</li>
</ul>
</li>
<li>Trinket M0 4 â†’ CLK<ul>
<li>This pin pulses during an SPI transfer to delineate bits to the shift register.</li>
</ul>
</li>
<li>Trinket M0 5 â†’ PICO (peripheral input, controller output)<ul>
<li>This pin goes low or high during an SPI transfer to send bits to the shift register.</li>
</ul>
</li>
</ul>
<p><img alt="photo of mcu on" src="../docs/img/trinketm0.jpeg" /></p>
<p>The Trinket M0 receives a byte from the control computer over a USB serial connection and forwards it to the shift register over SPI.</p>
<table>
<thead>
<tr>
<th>Profile Input File .csv: <code>flasher_cmds</code> value</th>
<th>Trinket M0 SPI Output</th>
<th>Bit Representation (Shift Register Outputs)</th>
<th>Trinket M0 RGB LED Color</th>
<th>Hawkeyes On</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0000000</td>
<td>(Dimmed)</td>
<td>None</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>0000001</td>
<td>Red</td>
<td>Center</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>0000010</td>
<td>Green</td>
<td>Inner</td>
</tr>
<tr>
<td>3</td>
<td>3</td>
<td>0000011</td>
<td>Yellow</td>
<td>Center, Inner</td>
</tr>
<tr>
<td>4</td>
<td>4</td>
<td>0000100</td>
<td>Blue</td>
<td>Outer</td>
</tr>
<tr>
<td>5</td>
<td>5</td>
<td>0000101</td>
<td>Purple</td>
<td>Center, Outer</td>
</tr>
<tr>
<td>6</td>
<td>6</td>
<td>0000110</td>
<td>Cyan</td>
<td>Inner, Outer</td>
</tr>
<tr>
<td>7</td>
<td>7</td>
<td>0000111</td>
<td>White</td>
<td>Center, Inner, Outer</td>
</tr>
</tbody>
</table>
<p>The control computer will flash whichever group of Hawkeyes is specified by the input profile .csv file at 5 Hz.</p>
<h3 id="cable-maintenance">Cable Maintenance</h3>
<h4 id="what-if-a-cable-breaks">What if a cable breaks?</h4>
<p>The original cable is Spiderwire EZ Braid braided dyneema fishing line (50 lb pull strength), chosen for its stretch resistance. A replacement can be found at any tackle store or Wal-Mart, but a spool of extra cable should already be stored with the beam mapper.</p>
<p>Cable length should be carefully sized to allow the raft to reach all corners of the workspace, but with as little extra length as possible at the maximum allowed separation of 25.5".</p>
<h2 id="coordinate-system">Coordinate System</h2>
<p>In order for the raft to be moved to a meaningful position in mirror-space, coordinates must be referenced to sensible locations where the mirror edges and robot frame register to one another.</p>
<ul>
<li><strong>x-axis</strong>: plane of contact between the "south" frame and an edge of the mirror</li>
<li><strong>y-axis</strong>: plane of contact between the "west" side aluminum registration tab and a perpendicular mirror edge.</li>
</ul>
<p>The coordinate system of the robot therefore has its origin at the SW corner, where the aluminum alignment tab on the fixed frame meets the aluminum extrusion face.</p>
<h2 id="input-files">Input Files</h2>
<p>There are two types of input files: <code>geometry</code> and <code>profile</code>.
Read on to learn what they are for and what is inside each.</p>
<h4 id="ok-but-is-there-an-easy-way-to-make-a-new-one">Ok, but is there an easy way to make a new one?</h4>
<p><code>.ipynb</code> files are provided in the <code>data/input/*</code> directories to assist with making these input files. Most likely, you will only need <code>data/input/create_profile.ipynb</code>.</p>
<p>You will need Jupyter installed on the computer running this notebook. Then simply copy the new files to the <code>/data/input/*</code> directory.</p>
<h3 id="geometry">Geometry</h3>
<p>Geometry files are one-line .csv files in <code>data/input/geometry</code>. </p>
<p><code>create_geometry.ipynb</code> is provided to script the creation of geometry files.</p>
<p>Each one defines the physical setup of the robot when it is in a certain configuration, for instance, when it is installed on a mirror of a certain dimension. Each column entry describes an aspect of the physical setup of the system. A simplistic example:</p>
<table>
<thead>
<tr>
<th align="center">sw_0</th>
<th align="center">sw_1</th>
<th align="center">nw_0</th>
<th align="center">nw_1</th>
<th align="center">se_0</th>
<th align="center">se_1</th>
<th align="center">ne_0</th>
<th align="center">ne_1</th>
<th align="center">w</th>
<th align="center">h</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">.1</td>
<td align="center">.1</td>
</tr>
</tbody>
</table>
<p><img alt="geometry" src="../docs/img/geometry.png" /></p>
<p>Each corner point is the location of an <strong>eyelet</strong> through which the cable passes, expressed relative to the SW origin, described above. The width and height of the raft are defined by the separations between eyelets on the raft through which the cable passes.</p>
<blockquote>
<p><strong>NOTE:</strong> If the dimensions of the frame eyelets have been measured relative to each edge, the y-positions of the corner eyelets can be calculated as a function of the separation between the aluminum extrusions that make up the support structure and clamping surfaces.</p>
<p>The eyelets of the motor mounts measured 6.19 +/- 0.5 mm from the frame to the face of the motor mount bracket on the interior of the mapping region, and 7.96 +/- 0.02 mm from the face of the motor mount to the eyelet, for a total eyelet offset from the contact patch of 0.014 +/- 0.001 m. This value will be used to calculate eyelet y-positions as a function of frame separation.</p>
<p>The eyelet positions should not ever change in the x-direction, unless the motor mounts are removed from the aluminum frames.</p>
</blockquote>
<h3 id="profile">Profile</h3>
<p>Profile files are multi-line .csv files in <code>data/input/profiles</code>. Each line defines a new position to which the robot should move, in the coordinate system defined above, and which group of Hawkeye sources should be flashed.</p>
<p><code>profiles/create_profile.ipynb</code> is provided to script the creation of profiles.</p>
<p><img alt="profile" src="../docs/img/profile.png" /></p>
<p>Upon reaching each location in the profile, the robot is programmed to flash Hawkeye sources on and off (default: 10 "on" states, 50% duty cycle, 5 Hz). Which group of sources is enabled is configurable with the <code>flasher_cmds</code> column in the profile .csv. See the table in the previous section. Some examples follow.</p>
<p>For example, to move to a single coordinate and flash all three groups of Hawkeyes:</p>
<table>
<thead>
<tr>
<th align="center">flasher_cmds</th>
<th align="center">pos_cmd_0s</th>
<th align="center">pos_cmd_1s</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">7</td>
<td align="center">.5</td>
<td align="center">.5</td>
</tr>
</tbody>
</table>
<p>to move to a single coordinate and flash only the center Hawkeye:</p>
<table>
<thead>
<tr>
<th align="center">flasher_cmds</th>
<th align="center">pos_cmd_0s</th>
<th align="center">pos_cmd_1s</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">1</td>
<td align="center">.5</td>
<td align="center">.5</td>
</tr>
</tbody>
</table>
<p>to move to a single coordinate and flash the center and inner ring Hawkeyes:</p>
<table>
<thead>
<tr>
<th align="center">flasher_cmds</th>
<th align="center">pos_cmd_0s</th>
<th align="center">pos_cmd_1s</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">2</td>
<td align="center">.5</td>
<td align="center">.5</td>
</tr>
</tbody>
</table>
<p>Building up a sequence of these moves allows a shape to be scanned.</p>
<h2 id="output-files">Output Files</h2>
<p>Output files store telemetry for each run in <code>data/output</code>. They are timestamped <code>.hdf5</code> files.</p>
<h2 id="physical-installation">Physical Installation</h2>
<h3 id="general-tips">General tips</h3>
<ul>
<li>
<p>Having two people helps.</p>
</li>
<li>
<p><em><span style="color:red"><strong>SAFETY ALERT: BE VERY CAREFUL</strong> about touching the buttons on the black slide-adjust nuts</span></em></p>
<ul>
<li>If you are loosening or tightening the mapper down to anything, when the mapper is under tension, touching the button could release tension rapidly, <em><strong>potentially causing a fall</strong></em>, potentially on to a <em><strong>very expensive mm-wave optic,</strong></em> which you do not want.</li>
<li>If you are adjusting the mapper spacing and you let them off of the threaded rod, <em>they will disassemble themselves rapidly</em>. You don't want to lose any parts.</li>
</ul>
</li>
<li>
<p>Bring a USB extension cable to make moving the frame to various mirrors easier. That will extend RS485 connection, allowing you to stand or sit in a more comfortable spot.</p>
</li>
<li>
<p>If you can't have the shutter open to let the optical chain see cold sky, bring a lot of flat Eccosorb panels. Don't bother trying to tape Eccosorb to anything. Tape won't stick. Just pinch it in between the mirror and threaded rod. This also helps keep the threaded rod or raft from marring the mirror surface, which is very important.</p>
</li>
<li>
<p>Keep as much stuff (power/data cables, hands, heads, ladders) as possible out of the path of the beam.</p>
</li>
</ul>
<h3 id="k1">K1</h3>
<p>Underneath shutter, highest up. Put a step ladder inside the K-mirror frame to make the lift easier. Route Hawkeye cables around back of K1 and down.</p>
<p><code>python main.py ./data/input/geometry/K1.csv ./data/input/profiles/K1_&lt;profile&gt;.csv</code></p>
<p><img alt="K1" src="../docs/img/K1_orientation.jpeg" /></p>
<h3 id="k2">K2</h3>
<p>Should be easy. Remove the anti-head-smasher foam first to get to the bottom clamping surface.</p>
<p><code>python main.py ./data/input/geometry/K2.csv ./data/input/profiles/K2_&lt;profile&gt;.csv</code></p>
<p><img alt="K2" src="../docs/img/K2_orientation.jpeg" /></p>
<h3 id="k3">K3</h3>
<p>Pucker factor 11. Have a friend help you mount the mapper; one person to hold the mapper in place, one to secure the slide-adjust nutes. Gravity is working against you, and you're right above F1, but snug things down good and tight when mounting the mapper and you will be fine. I used a crescent wrench on the black slide-adjust nuts for this one, to get a lot of clamping force. <em><span style="color:red"><strong>Be careful not to release the slide-adjust nuts when using the wrench.</strong></span></em></p>
<p><code>python main.py ./data/input/geometry/K3.csv ./data/input/profiles/K3_&lt;profile&gt;.csv</code></p>
<p><img alt="K3" src="../docs/img/K3_orientation.jpeg" /></p>
<h3 id="f1">F1</h3>
<p>Another easy one.</p>
<p><code>python main.py ./data/input/geometry/F1.csv ./data/input/profiles/F1_&lt;profile&gt;.csv</code></p>
<p><img alt="F1" src="../docs/img/F1_orientation.jpeg" /></p>
<h3 id="p2">P2</h3>
<p>Easy. It's down on the floor near the wall.</p>
<p>[photo of mapper mounted on P2]</p>
<h2 id="operation">Operation</h2>
<p>When a surface geometry file has been created and the profile for the given shape to be mapped is generated, we are ready to run the program. There should already be geometry and profile files for each mirror in the <code>data/input</code> directories.</p>
<h2 id="homing">Homing</h2>
<h3 id="pre-mapping-checks">Pre-mapping checks</h3>
<ol>
<li>Make sure that 24 V is being supplied to all driver boards and that the polarity is correct.</li>
<li>Make sure that 6.7V is being supplied to the Hawkeyes.</li>
<li>Make sure the power supply output is on.</li>
<li>Make sure that the cable is wound onto each spool and that no loops of excess cable are trapped underneath the cable wound onto the spools.</li>
<li>Check the excess cable played out in the raft's current position. Some excess is fine as long as it doesn't interfere with the raft's motion.</li>
<li>Ensure the Hawkeye source power and data cables lines won't interfere with mapper operation, usually, this means routing the cables somewhat along the gravity vector.</li>
<li>Ensure the <code>hotspot</code> <code>conda</code> env is active: <code>conda activate hotspot</code>.</li>
</ol>
<h3 id="mapping">Mapping</h3>
<ol>
<li>Start the program with <code>python main.py ./data/input/geometry/&lt;geometry.csv&gt; ./data/input/profiles/&lt;profile.csv&gt;</code></li>
<li>Perform a homing calibration: <code>c</code>, <code>RETURN</code> key. </li>
<li>The motors will drive to each corner in turn, bumping the hard stop three times in order to measure the encoder position where 0 mm of cable is played out. When complete, it will move to the center of the workspace.</li>
<li>Verify that the raft reached its home position in the center of the workspace, and that the other axes achieved tension. If not, GOTO 2. If homing succeeded without incident and cables are not taut, check the measurements of the corner eyelets and the raft dimensions provided in the geometry input .csv file.</li>
<li>Perform a mapping sequence: <code>r</code> (for run), <code>RETURN</code> key. </li>
<li>The raft will drive to each location and flash the Hawkeyes at each point in the sequence. Observe the mapper, ensuring the Hawkeye signal cable does not interfere with the mapper.<ol>
<li>You may request a mode change at any time. Mode changes are processed at the end of each move.</li>
<li>You may abort the program with <code>Ctrl+C</code>.</li>
</ol>
</li>
<li>Upon completing a sequence, it may be repeated by requesting the sequence mode again.</li>
<li>You may select a different sequence by pressing <code>s</code> and following the prompts.</li>
</ol>
<h2 id="reference-html">Reference HTML</h2>
<p>The html documentation of the source code and Markdown materials is generated by <a href="https://timothycrosley.github.io/portray/">portray</a>.</p>
<p>To regenerate the documentation, execute:</p>
<div class="codehilite"><pre><span></span><code>portray<span class="w"> </span>as_html<span class="w"> </span>-m<span class="w"> </span>hotspot<span class="w"> </span>-o<span class="w"> </span>docs/html/<span class="w"> </span>--overwrite
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        
<footer class="md-footer">
    
      <nav class="md-footer__inner md-grid" aria-label="Footer">
        
          
          <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Home" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  Previous
                </span>
                Home
              </div>
            </div>
          </a>
        
        
          
          <a href="../reference/hotspot/algorithm/" class="md-footer__link md-footer__link--next" aria-label="Next: Algorithm" rel="next">
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  Next
                </span>
                Algorithm
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
            
            Powered by
            <a href="http://timothycrosley.github.io/portray">portray.</a>
            You too can
            <a href="http://timothycrosley.github.io/portray">
              portray</a>
            your Python project well using automatic documentation.
          </div>
        
      </div>
    </div>
  </footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>